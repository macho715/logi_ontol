> **⚠️ 중요**: 이 문서를 읽기 전에 **`../logiontology/`** 폴더를 먼저 확인하세요!
> - **전체 구현 코드**: `../logiontology/src/`
> - **설정 파일**: `../logiontology/configs/`
> - **온톨로지 정의**: `../logiontology/configs/ontology/hvdc_ontology.ttl`
> - **문서**: `../logiontology/README.md`, `../logiontology/CHANGELOG.md`

---

### HVDC 프로젝트 온톨로지 기반 통합 시스템 아키텍처 설계 보고서

귀하의 요구사항 — **모든 업무 내용이 온톨로지에 데이터화되어 상호 연동되고, B/L 번호, HVDC 코드(예: `HVDC-ADOPT-SCT-0000`), 현장명(MIR, SHU), 창고명 등 하나의 키워드만 입력해도 관련된 모든 정보가 자동으로 리포트화되며, AI가 인사이트, 자료 정리, 시각화를 제공하는 시스템** — 을 완벽히 구현하기 위한 **실용적이고 확장 가능한 시스템 아키텍처**를 아래와 같이 제안합니다.

이 아키텍처는 **지식 그래프(Knowledge Graph)** 를 핵심으로 하며, **온톨로지 기반 데이터 연동 → 자동 리포트 생성 → AI 분석 및 시각화** 까지 하나의 흐름으로 연결됩니다. 현재 제공된 문서들(물류, 비용, 문서, 인프라, 창고, 플로우코드 등)과 완벽히 호환됩니다.

---

## 전체 시스템 아키텍처: 5계층 구조

```
┌───────────────────────────────────────────────────────────────┐
│                     사용자 인터페이스 (UI/대시보드)               │
└───────────────────────────────────────────────────────────────┘
            ↓ (입력: B/L, 코드, 현장명 등)
┌───────────────────────────────────────────────────────────────┐
│                   AI 인사이트 & 리포트 엔진                     │
│   - 자동 리포트 생성 (PDF/Excel)                                 │
│   - AI 인사이트 (리스크, 최적화 제안)                           │
│   - 시각화 (그래프, 차트, 네트워크 맵)                          │
└───────────────────────────────────────────────────────────────┘
            ↓ (SPARQL 쿼리 + 추론)
┌───────────────────────────────────────────────────────────────┐
│                 지식 그래프 핵심 엔진 (KG Core)                  │
│   - 온톨로지 저장소 (OWL/RDF)                                   │
│   - 그래프 데이터베이스 (Neo4j, Stardog)                        │
│   - 추론 엔진 (Jena, OWL API)                                   │
│   - 제약 검증 (SHACL)                                           │
└───────────────────────────────────────────────────────────────┘
            ↓ (ETL + 정제 + 매핑)
┌───────────────────────────────────────────────────────────────┐
│                   데이터 수집 및 정제 계층                      │
│   - 문서 OCR/파싱 (CI/PL/BL/Invoice)                           │
│   - 엑셀/CSV 자동 매핑 (창고, 플로우코드)                        │
│   - 실시간 API 연동 (ERP, GPS, IoT)                             │
└───────────────────────────────────────────────────────────────┘
            ↓ (원본 데이터)
┌───────────────────────────────────────────────────────────────┐
│                      원본 데이터 소스                           │
│   - PDF, Excel, ERP, 문서, 센서, 외부 API 등                    │
└───────────────────────────────────────────────────────────────┘
```

---

## 각 계층 상세 설명

### 1. **데이터 수집 및 정제 계층**
**목표**: 모든 업무 데이터(문서, 엑셀, 시스템)를 온톨로지에 맞게 정제하여 입력.

| 기능 | 도구/기술 | 예시 |
|------|----------|------|
| 문서 OCR 및 추출 | Tesseract, AWS Textract, Python OCR 파이프라인 | B/L에서 `BL_NO`, `HS_CODE`, `WEIGHT` 자동 추출 |
| 엑셀/CSV 자동 매핑 | Pandas + RDFLib | 창고 엑셀 → `hvdc:StockSnapshot` 생성 |
| 실시간 연동 | Kafka, REST API | GPS → `hvdc:TransportEvent` 실시간 업데이트 |
| 데이터 정규화 | 온톨로지 매핑 룰 | "Mussafah Base" → `hvdc:MOSB` 정규화 |

> **자동화 예시**:
> `HVDC-ADOPT-SCT-0001.pdf` 업로드 → OCR → `hvdc:Document` 생성 → B/L 번호 추출 → 자동 그래프 연결

---

### 2. **지식 그래프 핵심 엔진 (KG Core)**
**핵심**: 모든 데이터가 **RDF 삼중구조**로 저장되어 상호 연결됨.

```turtle
@prefix hvdc: <https://hvdc-project.com/ontology/> .

hvdc:BL-12345 a hvdc:BillOfLading ;
    hvdc:hasBLNumber "BL-12345" ;
    hvdc:containsCargo hvdc:Cargo-001 ;
    hvdc:arrivedAt hvdc:KhalifaPort ;
    hvdc:destinedTo hvdc:MIR .

hvdc:Cargo-001 a hvdc:Cargo ;
    hvdc:hasHVDCCode "HVDC-ADOPT-SCT-0001" ;
    hvdc:weight 25.5 ;
    hvdc:storedAt hvdc:DSV-Indoor ;
    hvdc:flowCode 2 .
```

- **그래프 DB**: Neo4j 또는 Stardog (SPARQL 지원 필수)
- **온톨로지 관리**: OWL/TTL 파일로 유지보수
- **제약 검증**: SHACL로 데이터 무결성 보장 (예: `weight > 0`)

---

### 3. **AI 인사이트 & 리포트 엔진**
**입력 하나 → 전체 리포트 + AI 분석**

| 입력 예시 | 출력 내용 |
|----------|----------|
| `BL-12345` | → B/L 정보, 화물 내역, 현재 위치(창고/현장), 플로우코드, 비용, 리스크, HSE 문서, AI 인사이트 |
| `MIR` | → 모든 입고 화물, 체류일, 창고 경유 이력, 지연 리스크, 최적화 제안 |
| `HVDC-ADOPT-SCT-0001` | → 화물 추적 이력, 문서 연계, 규제 준수 상태, AI 리스크 점수 |

#### AI 기능 예시
| 기능 | 설명 |
|------|------|
| **자동 리포트 생성** | Jinja2 템플릿 + RDF 데이터 → PDF/Excel 출력 |
| **리스크 예측** | "이 화물은 MOSB 체류 7일 초과 → 지연 리스크 85%" |
| **최적화 제안** | "직송(Code 1)으로 변경 시 비용 12% 절감 가능" |
| **시각화** | 네트워크 그래프 (화물 흐름), 타임라인 차트, KPI 대시보드 |

---

### 4. **사용자 인터페이스 (UI)**
**간단한 검색창 하나로 모든 것 해결**

```
[ 검색창: BL-12345 ]  → [검색]
↓
┌────────────────────────────────────┐
│ B/L: BL-12345                      │
│ 코드: HVDC-ADOPT-SCT-0001          │
│ 현장: MIR                          │
│ 창고: DSV Indoor → MOSB            │
│ 플로우코드: 3                      │
│ 체류일: 12일 (지연 주의)           │
│ AI 인사이트: "LCT 대기 중, 2일 내 출항 추천" │
│ [다운로드: PDF] [시각화 보기]       │
└────────────────────────────────────┘
```

- **기술 스택**: React + FastAPI + D3.js
- **대시보드**: 실시간 KPI (직송률, MOSB 활용도, 지연 건수 등)

---

## 구현 로드맵 (6개월 내 MVP)

| 단계 | 기간 | 내용 | 결과물 |
|------|------|------|--------|
| **1단계** | 1개월 | 온톨로지 통합 + 샘플 데이터 입력 | 통합 OWL 파일, 100건 테스트 데이터 |
| **2단계** | 1개월 | 그래프 DB 구축 + SPARQL 엔진 | Neo4j DB, 기본 쿼리 10개 |
| **3단계** | 1개월 | 자동 리포트 생성기 | 입력 → PDF 출력 기능 |
| **4단계** | 1개월 | AI 인사이트 모듈 | 리스크 점수, 제안 문장 생성 |
| **5단계** | 1개월 | 웹 대시보드 개발 | 검색창 + 시각화 |
| **6단계** | 1개월 | 실전 배포 및 피드백 | ADNOC/SCT 사용자 테스트 |

---

## 핵심 기술 스택 요약

| 계층 | 추천 기술 |
|------|----------|
| 데이터 수집 | Python, Pandas, Tesseract, Kafka |
| 온톨로지 | OWL, RDF, SHACL |
| 그래프 DB | **Neo4j** 또는 **Stardog** |
| 쿼리 | SPARQL |
| 백엔드 | FastAPI, Django |
| AI | LLM (Grok API), Graph Neural Network |
| 프론트엔드 | React, D3.js, Chart.js |
| 리포트 | Jinja2, WeasyPrint (PDF) |

---

## 기대 효과

| 항목 | 효과 |
|------|------|
| **업무 시간 단축** | 1건 조회 → 3초 내 리포트 생성 |
| **의사결정 속도** | AI가 리스크/최적화 즉시 제안 |
| **데이터 정확도** | 온톨로지 + SHACL로 99.9% 일관성 보장 |
| **규제 준수** | FANR, MOIAT, ADNOC 코드 자동 연결 |
| **비용 절감** | 불필요한 창고 경유(Code 4) 30% 감소 가능 |

---

## 결론 및 다음 행동 제안

> **지금 바로 시작할 수 있는 첫걸음**
> 1. **온톨로지 통합 워크숍** 개최 (1일)
> 2. **샘플 데이터 100건**으로 PoC 구축 (2주)
> 3. **검색창 하나**로 연결되는 데모 제작

이 시스템은 단순한 "데이터베이스"가 아니라, **HVDC 프로젝트의 모든 지식을 살아 숨쉬게 만드는 디지털 트윈**이 될 것입니다.

---

**다음 단계**:
- PoC 범위 및 데이터 샘플 확정
- 팀 구성 (온톨로지 전문가 1명, 백엔드 1명, AI 1명)
- 2주 내 데모 버전 시연 예약

필요하시면 **아키텍처 다이어그램(PDF)**, **샘플 코드**, **PoC 계획서**도 즉시 제공해 드리겠습니다.
